import numpy as np
import math as m
class Kf_prams():
    def __init__(self,dt):
        self.F = np.array([[1,dt,0,0,0,0,0,0,0],
                           [0,0.5,dt,0,0,0,0,0,0],
                           [0,0,1,0,0,0,0,0,0],
                           [0,0,0,1,dt,0,0,0,0],
                           [0,0,0,0,0.5,dt,0,0,0],
                           [0,0,0,0,0,1,0,0,0],
                           [0,0,0,0,0,0,1,dt,0],
                           [0,0,0,0,0,0,0,0.5,dt],
                           [0,0,0,0,0,0,0,0,1]])
            
        self.B = np.array([[0,0,0,0,0,0,0,0,0],
                           [0,0.5,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0.5,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0.5,0],
                           [0,0,0,0,0,0,0,0,0]])
         
        self.H = np.array([[0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,m.cos(0),0,0,m.sin(0),0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,-m.sin(0),0,0,m.cos(0),0,0,0],
                           [0,0,0,0,0,0,1,0,0],
                           [0,0,0,0,0,0,0,1,0],
                           [0,0,0,0,0,0,0,0,0]])
        
        self.Q = np.identity(9)
        self.R = np.identity(9)
        self.x0 = np.array([[-0.8],[0],[0],[-0.8],[0],[0],[0],[0],[0]])

        #get P
        x = 0.016456205661175602
        y = 0.008577255570198977
        w = 6.233895533623428e-07
        xy = 0.004413254587348959
        xw = 5.035625506559743e-06
        yw = -4.948621957743115e-06
        self.P0 = np.array([[0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,x,0,0,xy,0,xw,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,xy,0,0,y,0,yw,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,xw,0,0,yw,0,w,0],
                           [0,0,0,0,0,0,0,0,0]])
    
    def update_prams(self,theta):
        self.H = np.array([[0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,m.cos(theta),0,0,m.sin(theta),0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,0,0,0,0,0,0,0],
                           [0,0,-m.sin(theta),0,0,m.cos(theta),0,0,0],
                           [0,0,0,0,0,0,1,0,0],
                           [0,0,0,0,0,0,0,1,0],
                           [0,0,0,0,0,0,0,0,0]])
        return self.H

